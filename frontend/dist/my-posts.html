<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Adama Shopping - My Posts</title><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"><style>/* Root Variables */
  :root {
    --primary: #5A7BFC;
    --secondary: #4AD991;
    --accent: #FFD25A;
    --text: #2D3748;
    --light-text: #6B7280;
    --bg: #F8F9FA;
    --card: #FFFFFF;
    --radius: 16px;
    --shadow: 0 10px 30px rgba(0,0,0,0.08);
    --hover-shadow: 0 15px 45px rgba(0,0,0,0.12);
    --transition: 0.3s ease;
    --red-btn: #E74C3C;
    --red-btn-hover: #C0392B;
    --navbar-height: 60px;
  }

  /* Universal Styles */
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
  body { min-height:100vh; display:flex; flex-direction:column; background:var(--bg); color:var(--text); overflow-x:hidden; position:relative; }
  h1, h2, h3 { color:var(--text); font-weight:600; }
  p { color:var(--light-text); line-height:1.6; }

  /* Navbar Styles */
  .navbar {
    position: fixed; top: 0; left: 0; width: 100%; height: var(--navbar-height);
    background-color: var(--card); box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    z-index: 998; display: flex; justify-content: space-between; align-items: center;
    padding: 0 20px; transition: margin-left var(--transition), width var(--transition);
  }
  .navbar-logo {
    font-size: 24px; font-weight: 700; color: var(--primary); text-decoration: none;
    display: flex; align-items: center; gap: 8px; flex-shrink: 0;
  }
  .navbar-logo i { font-size: 28px; color: var(--accent); }
  .navbar-nav { display: flex; gap: 25px; margin-left: auto; flex-shrink: 0; }
  .navbar-nav a {
    color: var(--text); text-decoration: none; font-weight: 500; font-size: 16px;
    position: relative; transition: color var(--transition);
  }
  .navbar-nav a:hover { color: var(--primary); }
  .navbar-nav a::after {
    content: ''; position: absolute; left: 0; bottom: -5px; width: 0; height: 2px;
    background-color: var(--primary); transition: width var(--transition);
  }
  .navbar-nav a:hover::after, .navbar-nav a.active::after { width: 100%; }
  .navbar-nav a.active { color: var(--primary); }
  .navbar-buttons { display: flex; align-items: center; margin-left: 25px; flex-shrink: 0; }
  .navbar-logout-btn {
    background-color: var(--red-btn); color: white; padding: 8px 18px; border-radius: var(--radius);
    border: none; cursor: pointer; font-size: 15px; font-weight: 500; transition: all var(--transition);
    box-shadow: var(--shadow); display: flex; align-items: center; gap: 8px;
  }
  .navbar-logout-btn:hover { background-color: var(--red-btn-hover); transform: translateY(-2px); box-shadow: var(--hover-shadow); }

  /* Sidebar Styles */
  .sidebar {
    position: fixed; left: -280px; top: 0; width: 280px; height: 100%;
    background: linear-gradient(180deg, var(--primary), #4A6EED); color: white;
    transition: left var(--transition), box-shadow var(--transition); z-index: 999;
    overflow-y: auto; padding: 30px 20px; box-shadow: 5px 0 15px rgba(0,0,0,0.3);
  }
  .sidebar.active { left: 0; box-shadow: 5px 0 20px rgba(0,0,0,0.4); }
  .sidebar h2 {
    text-align: center; margin-bottom: 30px; color: white; font-size: 26px;
    font-weight: 700; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 15px;
  }
  .sidebar .user-profile-info {
    margin-bottom: 30px; text-align: center; background: rgba(255,255,255,0.1);
    padding: 15px; border-radius: var(--radius); box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }
  .sidebar .user-profile-info img {
    display: block; margin: 0 auto 15px; border-radius: 50%; width: 130px; height: 130px;
    object-fit: cover; border: 4px solid var(--accent); box-shadow: 0 0 15px rgba(0,0,0,0.3);
  }
  .sidebar .user-profile-info p { margin: 5px 0; font-size: 15px; color: #e0e0e0; font-weight: 300; }
  .sidebar .user-profile-info p strong { color: white; font-weight: 500; }
  .sidebar a {
    display: flex; align-items: center; gap: 15px; padding: 15px 20px; color: white;
    text-decoration: none; border-radius: var(--radius); background: rgba(255,255,255,0.15);
    margin: 12px 0; font-size: 16px; transition: all var(--transition); font-weight: 500;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  .sidebar a:hover, .sidebar a.active {
    background: rgba(255,255,255,0.3); transform: translateX(8px); box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }
  .sidebar a i { font-size: 20px; color: var(--accent); }
  #logoutBtnSidebar {
    margin-top: 30px; width: 100%; padding: 15px; font-size: 16px; font-weight: 600;
    background-color: var(--red-btn); color: white; border-radius: var(--radius);
    border: none; cursor: pointer; box-shadow: var(--shadow);
  }
  #logoutBtnSidebar:hover { background-color: var(--red-btn-hover); transform: translateY(-3px); box-shadow: var(--hover-shadow); }

  /* Toggle Button (Hamburger Menu) */
  .toggle-btn {
    position: fixed; top: 10px; left: 20px; z-index: 1001; cursor: pointer; padding: 8px;
    display: flex; flex-direction: column; justify-content: space-around; width: 40px; height: 35px;
    background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow);
    transition: all var(--transition);
  }
  .toggle-btn:hover { box-shadow: var(--hover-shadow); transform: translateY(-2px); }
  .bar { width: 100%; height: 4px; background-color: var(--text); margin: 3px 0; transition: all var(--transition); border-radius: 2px; }
  .toggle-btn.active .bar:nth-child(1) { transform: rotate(-45deg) translate(-7px, 6px); background-color: var(--accent); }
  .toggle-btn.active .bar:nth-child(2) { opacity: 0; }
  .toggle-btn.active .bar:nth-child(3) { transform: rotate(45deg) translate(-8px, -8px); background-color: var(--accent); }

  /* Main Layout & Sidebar Interaction */
  .main-layout-container {
    padding-top: calc(var(--navbar-height) + 20px); flex: 1; padding-left: 30px;
    padding-right: 30px; max-width: 1200px; margin: 0 auto; width: 100%;
    transition: padding-left var(--transition);
  }
  .sidebar.active ~ .main-layout-container { padding-left: calc(280px + 30px); }
  .sidebar.active ~ .navbar { margin-left: 280px; width: calc(100% - 280px); }

  /* Page Specific Styles */
  .page-title { font-size: 32px; color: var(--primary); margin-bottom: 25px; text-align: center; }
  .action-bar {
    background-color: var(--card); border-radius: var(--radius); box-shadow: var(--shadow);
    padding: 20px; margin-bottom: 30px; display: flex; justify-content: center; align-items: center;
  }
  .primary-btn {
    display: inline-flex; align-items: center; justify-content: center; padding: 12px 25px;
    border-radius: var(--radius); text-decoration: none; font-weight: 500;
    transition: all var(--transition); cursor: pointer; border: none;
    font-size: 16px; box-shadow: var(--shadow); gap: 8px;
    background-color: var(--primary); color: white;
  }
  .primary-btn:hover { background-color: #4A6EED; transform: translateY(-3px); box-shadow: var(--hover-shadow); }

  #postsContainer {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px;
  }
  .post-card {
    background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow);
    transition: all var(--transition); display: flex; flex-direction: column; overflow: hidden;
  }
  .post-card:hover { transform: translateY(-5px); box-shadow: var(--hover-shadow); }
  .post-card img { width: 100%; height: 200px; object-fit: cover; }
  .post-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
  .post-content h3 { font-size: 22px; color: var(--text); margin-bottom: 10px; }
  .post-content p { font-size: 15px; margin-bottom: 8px; }
  .post-content p strong { color: var(--text); }
  .post-actions {
    margin-top: auto; padding-top: 15px; border-top: 1px solid #f0f0f0;
    display: flex; gap: 10px; justify-content: flex-end;
  }
  .action-btn {
    padding: 8px 18px; border-radius: var(--radius); border: none;
    cursor: pointer; font-weight: 500; font-size: 14px;
    transition: all var(--transition); display: inline-flex;
    align-items: center; gap: 6px;
  }
  .edit-btn { background-color: var(--secondary); color: white; text-decoration: none; }
  .edit-btn:hover { background-color: #3cc681; }
  .delete-btn { background-color: var(--red-btn); color: white; }
  .delete-btn:hover { background-color: var(--red-btn-hover); }

  /* Footer Styles */
  .footer {
      background-color: var(--text); color: white; padding: 40px 20px; margin-top: auto;
  }
  .footer-container {
      max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 30px;
  }
  .footer-about, .footer-links, .footer-social { flex: 1; min-width: 250px; }
  .footer h3 { color: var(--accent); margin-bottom: 15px; font-size: 18px; }
  .footer p, .footer a { color: #ccc; text-decoration: none; line-height: 1.8; font-size: 14px; transition: color var(--transition); }
  .footer a:hover { color: white; }
  .footer-links ul { list-style: none; }
  .footer-social .social-icons { display: flex; gap: 15px; margin-top: 10px; }
  .footer-social .social-icons a { font-size: 20px; }
  .footer-bottom { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #444; font-size: 13px; color: #aaa; }

  /* Responsive Adjustments */
  @media (max-width: 992px) {
    .navbar { height: auto; padding-bottom: 10px; flex-direction: column; align-items: flex-start; }
    .navbar-logo, .navbar-nav, .navbar-buttons { width: 100%; justify-content: center; margin-left: 0; margin-top: 10px; }
    .main-layout-container { padding-left: 15px; padding-right: 15px; }
    .sidebar.active ~ .main-layout-container { padding-left: 15px; }
    .sidebar.active ~ .navbar { margin-left: 0; width: 100%; }
    #postsContainer { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
  }</style></head><body><nav class="navbar" id="mainNavbar"><a href="home.html" class="navbar-logo"><i class="fas fa-shopping-bag"></i> Adama Shopping</a><div class="navbar-nav"><a href="home.html">Home</a> <a href="aboutt.html">About</a> <a href="servicess.html">services</a> <a href="privacyy.html">privacy</a></div><div class="navbar-buttons"><button id="navbarLogoutBtn" class="navbar-logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button></div></nav><div class="toggle-btn" id="toggleBtn"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div><div class="sidebar" id="sidebar"><h2>Adama Shopping</h2><div id="sidebarUserInfo" class="user-profile-info"></div><a href="posts.html"><i class="fas fa-box"></i> Posts</a> <a href="my-posts.html" class="active"><i class="fas fa-store"></i> My Post</a> <a href="order.html"><i class="fas fa-shopping-cart"></i> My Orders</a> <a href="sellerOrders.html"><i class="fas fa-clipboard-list"></i> My Seller Orders</a> <button id="logoutBtnSidebar" class="red-btn"><i class="fas fa-sign-out-alt"></i> Logout</button></div><div class="main-layout-container"><h1 class="page-title">My Posts</h1><div class="action-bar"><a href="create-post.html" class="primary-btn"><i class="fas fa-plus"></i> Create New Post</a></div><div id="postsContainer"></div></div><footer class="footer"><div class="footer-container"><div class="footer-about"><h3>Adama Shopping</h3><p>Your one-stop online marketplace.</p></div><div class="footer-links"><h3>Quick Links</h3><ul><li><a href="home.html">Home</a></li><li><a href="posts.html">Posts</a></li><li><a href="aboutt.html">About</a></li><li><a href="servicess.html">service</a></li><li><a href="privacyy.html">privacy</a></li></ul></div><div class="footer-social"><h3>Follow Us</h3><div class="social-icons"><a href="#"><i class="fab fa-facebook-f"></i></a> <a href="#"><i class="fab fa-twitter"></i></a></div></div></div><div class="footer-bottom"><p>&copy; 2025 Adama Shopping. All Rights Reserved.</p></div></footer><script>// --- UI Elements ---
    const postsContainer = document.getElementById('postsContainer');
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleBtn');
    const mainNavbar = document.getElementById('mainNavbar');
    const sidebarUserInfo = document.getElementById('sidebarUserInfo');
    const navbarLogoutBtn = document.getElementById('navbarLogoutBtn');
    const logoutBtnSidebar = document.getElementById('logoutBtnSidebar');
    
    // --- User Authentication ---
    const storedUser = localStorage.getItem('currentUser');
    if (!storedUser) {
      alert('Please log in first.');
      window.location.href = 'login.html';
    }
    
    const currentUser = JSON.parse(storedUser);
    const username = currentUser.info.username;
    
    // --- UI Interactivity ---
    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('active');
      toggleBtn.classList.toggle('active');
      mainNavbar.classList.toggle('active');
    });

    // Display user info in sidebar
    const { info } = currentUser;
    sidebarUserInfo.innerHTML = `
      <img src="${info.profilePic || 'https://via.placeholder.com/130'}" alt="Profile Picture">
      <p>Hello, <strong>${info.fullName}!</strong></p>
      <p>Username: ${info.username}</p>
    `;
    
    // --- Core Page Logic ---
    async function loadPosts() {
      postsContainer.innerHTML = '<p style="text-align:center;">Loading posts...</p>';
      try {
        const res = await fetch(`http://localhost:3000/api/posts?username=${username}`);
        const data = await res.json();

        if (!res.ok) {
          postsContainer.innerHTML = `<p style="color:red; text-align:center;">Error loading posts: ${data.error}</p>`;
          return;
        }

        if (data.posts.length === 0) {
          postsContainer.innerHTML = '<p style="text-align:center;">You have not created any posts yet.</p>';
          return;
        }

        let html = '';
        data.posts.forEach(post => {
          html += `
            <div class="post-card">
              <img src="${post.image || 'https://via.placeholder.com/300x200/cccccc/ffffff?text=No+Image'}" alt="${post.title}">
              <div class="post-content">
                <h3>${post.title}</h3>
                <p><strong>Description:</strong> ${post.description || 'N/A'}</p>
                <p><strong>Location:</strong> ${post.location}</p>
                <p><strong>Price:</strong> ${post.price} Birr</p>
                <div class="post-actions">
                  <a href="edit-post.html?id=${post._id}" class="action-btn edit-btn"><i class="fas fa-edit"></i> Edit</a>
                  <button class="action-btn delete-btn" data-post-id="${post._id}"><i class="fas fa-trash"></i> Delete</button>
                </div>
              </div>
            </div>`;
        });
        postsContainer.innerHTML = html;

      } catch (err) {
        console.error(err);
        postsContainer.innerHTML = '<p style="color:red; text-align:center;">Network error while loading posts.</p>';
      }
    }

    async function deletePost(postId) {
      if (!confirm('Are you sure you want to permanently delete this post?')) return;

      try {
        const res = await fetch(`http://localhost:3000/api/posts/${postId}`, {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username }) // Backend ownership check
        });
        const result = await res.json();
        if (!res.ok) {
          alert(result.error || 'Error deleting post');
          return;
        }
        alert('Post deleted successfully');
        loadPosts(); // Refresh the list
      } catch (err) {
        console.error(err);
        alert('Network error while deleting post');
      }
    }

    // Event Delegation for Delete Buttons
    postsContainer.addEventListener('click', function(event) {
        const deleteButton = event.target.closest('.delete-btn');
        if (deleteButton) {
            const postId = deleteButton.dataset.postId;
            if (postId) {
                deletePost(postId);
            }
        }
    });

    // --- Logout Functionality ---
    function logout() {
      localStorage.removeItem('currentUser');
      window.location.href = 'login.html';
    }
    navbarLogoutBtn.addEventListener('click', logout);
    logoutBtnSidebar.addEventListener('click', logout);

    // Initial load
    loadPosts();</script></body></html>